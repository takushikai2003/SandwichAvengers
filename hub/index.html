<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MBTI Guild Hub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="box welcome-box">
    <h2>ğŸ° Welcome to the MBTI Guild Hub</h2>
    <p>Explore your guild, chat with members, manage tasks, and start your adventure!</p>
  </div>

  <div class="box profile-box">
    <h3>ğŸªª Profile</h3>
    <img id="profileAvatar" src="../images/default.png" alt="Avatar" style="width:80px; border-radius:50%; border:2px solid white; margin-bottom:10px;">
    <p><strong>Username:</strong> <span id="profileUsername">Loading...</span></p>
    <p><strong>MBTI Type:</strong> <span id="profileMBTI">---</span></p>
    <p><strong>Guild:</strong> <span id="profileGuild">---</span></p>
    <p><strong>Activities:</strong> <span id="profileActivities">---</span></p>
  </div>
  <div class="box board-box">
  <h3>ğŸ“œ Guild Board</h3>
  <div id="boardPosts"></div>
  <textarea id="boardInput" placeholder="Write your guild announcement or introduction..." rows="3" style="width:100%;"></textarea>
  <button id="post_board">Post to Board</button>
  </div>


  <div class="box todo-box">
    <h3>ğŸ“‹ Personalized To-Do List</h3>
    <p id="todoInstructions"></p>

    <ul id="j-list" class="todo-list" style="display:none;"></ul>
    <div id="p-container" class="bubble-container" style="display:none;"></div>

    <form id="todo-form">
      <input type="text" id="todo-input" placeholder="Add a new task..." required>
      <button type="submit">Add Task</button>
    </form>
  </div>

  <div class="box chat-box">
    <h3>ğŸ’¬ Guild Chat</h3>
    <div id="chatLog"></div>
    <input id="chatInput" placeholder="Type a message...">
    <button id="send_chat">Send</button>
  </div>

  <div class="box advisor-box">
    <h3>ğŸ§™ Guild Advisor</h3>
    <input id="advisorInput" placeholder="Ask your advisor...">
    <button onclick="consultAdvisor()">Consult</button>
    <div id="advisorReply">Waiting for your question...</div>
  </div>

  <div class="box game-box">
    <h3>âš½ MBTI Soccer Game</h3>
    <button id="start_soccer_game">Start Soccer Game</button>
    <canvas id="gameCanvas" width="800" height="500" style="display:none; margin-top:10px; border:2px solid white; border-radius:10px;"></canvas>
  </div>

  <script type="module">
    import { postBoardMessage } from './board.js';
    import { sendChat } from './chat.js';
    import { startSoccerGame } from './game.js';
    import { firebaseConfig } from '../env/firebaseConfig.js';

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    document.getElementById('start_soccer_game').addEventListener('click', () => {
      startSoccerGame();
    });
  </script>

</body>
</html>
